<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4SP - HOME</title>
    <meta name="google-site-verification" content="qzgkcoklZ-0u-HIDwlYOSIKivR8nxGvuQoSnWTFdjTU" />
    <link rel="stylesheet" href="css/style.css">
    <script src="/panic-key.js"></script>
    <script src="/url-changer.js"></script>
    
    <style>
        /* --- NEW: Page Overlay for Dropdown --- */
        #page-overlay {
            visibility: hidden; /* Hidden by default */
            opacity: 0;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black */
            z-index: 9998; /* Below the dropdown, above everything else */
            transition: opacity 0.25s ease-out, visibility 0.25s; /* Smooth fade */
        }

        #page-overlay.show {
            visibility: visible;
            opacity: 1;
        }

        /* --- NEW: Stacking context for the header --- */
        .main-header {
            position: relative; /* Needed to ensure z-index is respected */
            z-index: 500;
        }

        /* --- Dropdown Styles - Updated --- */
        .logged-in-link, .logged-out-link {
            display: none;
        }

        .main-nav .dropdown {
            position: relative;
        }

        .main-nav .dropdown .dropbtn {
            cursor: default;
        }

        .main-nav .dropdown-content {
            display: block;
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            transition: opacity 0.25s ease-out, transform 0.25s ease-out, visibility 0.25s;

            /* UPDATED POSITIONING */
            position: absolute;
            top: 100%;
            left: 0; /* Align to the left of the MORE button */
            margin-top: 10px;
            z-index: 9999; /* Increased z-index to appear over all content */

            background-color: #ffffff;
            min-width: 180px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            border-radius: 16px;
            overflow: hidden;
        }

        .main-nav .dropdown-content.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .main-nav .dropdown-header {
            padding: 12px 16px;
            font-family: 'PrimaryFont', sans-serif;
            color: #333;
            cursor: default;
        }

        .main-nav .dropdown-divider {
            height: 1px;
            margin: 0 10px;
            border: none;
            background-color: #e0e0e0;
        }

        .main-nav .dropdown-content a {
            color: #333;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            text-align: left;
            background-color: transparent;
            transition: background-color 0.2s ease-in-out;
        }

        .main-nav .dropdown-content a:hover {
            background-color: #f1f1f1;
        }

        /* --- START: VERSION TIMELINE --- */
        .timeline-section {
            padding: 50px 2rem;
            text-align: center;
            box-sizing: border-box;
        }

        .timeline-section h2 {
            margin-bottom: 50px;
            font-family: 'PrimaryFont', sans-serif;
        }

        .timeline-container {
            position: relative;
            max-width: 900px;
            margin: 0 auto;
        }

        .timeline-container::after {
            content: '';
            position: absolute;
            width: 100%;
            background-color: #e0e0e0;
            top: 15px;
            bottom: auto;
            left: 0;
            height: 4px;
            z-index: 1;
        }

        .timeline-wrapper {
            display: flex;
            justify-content: space-between;
            position: relative;
            z-index: 2;
        }

        .timeline-item {
            text-align: center;
            width: 20%;
            position: relative;
        }
        
        .timeline-item::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: white;
            border: 4px solid #333;
            top: 5px;
            border-radius: 50%;
            z-index: 1;
            left: 50%;
            transform: translateX(-50%);
        }

        .timeline-item-content {
            padding-top: 40px;
        }
        
        .timeline-item-content h3 {
            font-family: 'PrimaryFont', sans-serif;
            margin-bottom: 5px;
            color: #333;
        }

        .timeline-item-content p {
            font-size: 0.9em;
            color: #555;
            line-height: 1.4;
        }

        /* --- END: VERSION TIMELINE --- */


        /* --- START: REVISED CSS FOR FULL-WIDTH 'WHAT'S NEW' SECTION --- */
        .whats-new-section {
            padding: 50px 2rem;
            margin-top: 2rem;
            text-align: center;
            box-sizing: border-box;
        }

        .whats-new-section h2 {
            margin-bottom: 20px;
            font-family: 'PrimaryFont', sans-serif;
        }

        .whats-new-content p {
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
            text-align: center;
            font-family: 'PrimaryFont', sans-serif;
            color: #555;
            font-size: 1.1rem;
            line-height: 1.6;
        }
        /* --- END: REVISED CSS FOR FULL-WIDTH 'WHAT'S NEW' SECTION --- */

    </style>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script src="../panic-key.js"></script>
</head>
<body>
    <div id="page-overlay"></div>
    <section class="hero-section dark-bg">
        <div class="container">
            <h1>4SIMPLEPROBLEMS</h1>
        </div>
    </section>

    <header class="main-header light-bg">
        <div class="container">
            <div class="logo">
                <img src="images/logo-dark.png" alt="4SP Logo">
            </div>
            <nav class="main-nav">
                <ul id="mainNavLinks">
                    <li class="dropdown logged-in-link" id="more-dropdown">
                        <a class="dropbtn">MORE</a>
                        <div class="dropdown-content">
                            <div class="dropdown-header">MORE</div>
                            <hr class="dropdown-divider">
                            <a href="the-story.html">THE STORY</a>
                            <a href="legal.html">LEGAL</a>
                            <a href="https://buymeacoffee.com/4simpleproblems" target="_blank" rel="noopener noreferrer">DONATE</a>
                        </div>
                    </li>
                    <li class="logged-in-link"><a href="logged-in/dashboard.html">DASHBOARD</a></li>
                    <li class="logged-out-link"><a href="the-story.html">THE STORY</a></li>
                    <li class="logged-out-link"><a href="legal.html">LEGAL</a></li>
                </ul>
            </nav>
            <div class="auth-buttons" id="authButtons">
            </div>
        </div>
    </header>

    <section class="news-bar light-bg">
        <div class="container">
            <p>Fast. Secure. Yours.</p>
        </div>
    </section>
    <section class="hp-infra-section light-bg">
        <div class="container">
            <h2 id="holiday-greeting">escape reality.</h2>
            <p>Engage in video games, play sounds on the soundboard to get your teachers annoyed, and have fun.</p>
        </div>
    </section>
    <section class="info-sections light-bg">
        <div class="container">
            <div class="info-item left-image">
                <div class="info-content"><h3>ABOUT US</h3><p>We are the perfect website to have fun during boring school hours, disrupt everyone that hates these sounds, and to play some games when you have your work done, or don't. I don't care fr.</p></div>
            </div>
            <div class="info-item right-image">
                <div class="info-content"><h3>SOUNDBOARD</h3><p>Unleash a barrage of sounds to playfully annoy your teachers. Perfect for those moments when you need a little mischief. your teachers will actually become "üò°" right to your face.</p></div>
            </div>
            <div class="info-item left-image">
                <div class="info-content"><h3>OTHER STUFF</h3><p>We have a lot of other features implemented, like an entirely redesigned requests page, playlists page, and other stuff that i felt like adding bc i have free will</p></div>
            </div>
            <div class="info-item right-image">
                <div class="info-content"><h3>THIS WEBSITE'S GOALS</h3><p>The goals for this website is to make the best, most fun experience for students that don't care about their academic grade, or who just don't care at all. I hate ads, and I love seeing the number of users go up. Alright?</p></div>
            </div>
            <div class="info-item left-image">
                <div class="info-content"><h3>A NOTE ON PROXIES</h3><p>As a personal project without any income, I unfortunately cannot continue to manage and support the proxy servers. The costs and effort required are significant, especially while also working to support new features and fulfill all of your requests. The proxy services have been archived for now. I sincerely apologize for this inconvenience.</p></div>
            </div>
        </div>
    </section>

    <section class="timeline-section light-bg">
        <div class="container">
            <h2>VERSION HISTORY</h2>
            <div class="timeline-container">
                <div class="timeline-wrapper">
                    <div class="timeline-item">
                        <div class="timeline-item-content">
                            <h3>Version 1</h3>
                            <p>March 13th, 2025</p>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-item-content">
                            <h3>Version 2</h3>
                            <p>April 11th, 2025</p>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-item-content">
                            <h3>Version 3</h3>
                            <p>May 14th, 2025</p>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-item-content">
                            <h3>Version 4</h3>
                            <p>August 23rd, 2025</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="whats-new-section light-bg">
        <h2>WHAT'S NEW</h2>
        <div class="whats-new-content">
            <p>
                V4 brings a fully remade dashboard with a cleaner layout, plus a new weather widget so you don‚Äôt have to Google ‚Äúwhats the weather rn‚Äù every time. You‚Äôve got shortcuts on the dashboard for fast navigation, and the ‚ÄúOthers‚Äù section is‚Ä¶ absolutely stuffed with pages. Like, unnecessarily packed. But hey, the remade Requests page looks clean. The Soundboard is now juiced with settings like SAS (Spatial Audio Simulation) and full-on EQ sliders (bass/mid/treble), plus Shift+C to clear sounds and M to mute‚Äîfeels futuristic. The autoclicker can now be triggered by hover or hold on sound buttons because why not. Panic Key is my personal favorite‚Äîyou can press one key and instantly escape to whatever page you want. Accounts? Way more secure now, with options to sign in or up with your email and password, Google, or the newly added GitHub. You can also edit your username now, just... keep it clean. And a serious warning: using explicit wording in a request or having it in your username when you post will get your account temporarily banned for violating the terms of service. If your username is a little wild but you stay anonymous on the Requests page (or just don't use it), you're good. We only care if you're putting that stuff on display. Anyway, that‚Äôs V4. Go explore or whatever.
            </p>
        </div>
    </section>
    <footer>
        <div class="container">
            <p>&copy; 2025 4SP. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // --- HOLIDAY GREETING LOGIC ---
        function setHolidayGreeting() {
            const greetingElement = document.getElementById('holiday-greeting');
            if (!greetingElement) return;

            const now = new Date();
            const month = now.getMonth();
            const day = now.getDate();
            const year = now.getFullYear();

            const getNthWeekdayOfMonth = (year, month, weekday, n) => {
                const date = new Date(year, month, 1);
                let count = 0;
                while (date.getMonth() === month) {
                    if (date.getDay() === weekday) {
                        count++;
                        if (count === n) return date.getDate();
                    }
                    date.setDate(date.getDate() + 1);
                }
                return -1;
            };

            const holidays = {
                "Happy New Year!": { month: 0, day: 1 },
                "Happy Martin Luther King Jr. Day!": { month: 0, day: getNthWeekdayOfMonth(year, 0, 1, 3) },
                "Happy Valentine's Day!": { month: 1, day: 14 },
                "Happy Presidents' Day!": { month: 1, day: getNthWeekdayOfMonth(year, 1, 1, 3) },
                "Happy St. Patrick's Day!": { month: 2, day: 17 },
                "Happy Easter!": { isDynamic: true, calculate: () => {
                    const a = year % 19, b = Math.floor(year / 100), c = year % 100, d = Math.floor(b / 4), e = b % 4, f = Math.floor((b + 8) / 25), g = Math.floor((b - f + 1) / 3), h = (19 * a + b - d - g + 15) % 30, i = Math.floor(c / 4), k = c % 4, l = (32 + 2 * e + 2 * i - h - k) % 7, m = Math.floor((a + 11 * h + 22 * l) / 451), month = Math.floor((h + l - 7 * m + 114) / 31), day = ((h + l - 7 * m + 114) % 31) + 1;
                    return { month: month - 1, day: day };
                }},
                "Happy Mother's Day!": { month: 4, day: getNthWeekdayOfMonth(year, 4, 0, 2) },
                "Happy Memorial Day!": { month: 4, day: (() => { const date = new Date(year, 5, 0); while (date.getDay() !== 1) { date.setDate(date.getDate() - 1); } return date.getDate(); })() },
                "Happy Father's Day!": { month: 5, day: getNthWeekdayOfMonth(year, 5, 0, 3) },
                "Happy Juneteenth!": { month: 5, day: 19 },
                "Happy Independence Day!": { month: 6, day: 4 },
                "Happy Labor Day!": { month: 8, day: getNthWeekdayOfMonth(year, 8, 1, 1) },
                "Happy Halloween!": { month: 9, day: 31 },
                "Happy Thanksgiving!": { month: 10, day: getNthWeekdayOfMonth(year, 10, 4, 4) },
                "Merry Christmas!": { month: 11, day: 25 }
            };

            for (const [greeting, dateInfo] of Object.entries(holidays)) {
                let holidayMonth, holidayDay;
                if (dateInfo.isDynamic) {
                    const dynamicDate = dateInfo.calculate();
                    holidayMonth = dynamicDate.month;
                    holidayDay = dynamicDate.day;
                } else {
                    holidayMonth = dateInfo.month;
                    holidayDay = dateInfo.day;
                }
                if (month === holidayMonth && day === holidayDay) {
                    greetingElement.textContent = greeting;
                    break;
                }
            }
        }

        // --- AUTHENTICATION & NAV LINK LOGIC ---
        const authButtonsDiv = document.getElementById('authButtons');
        const loggedInLinks = document.querySelectorAll('.logged-in-link');
        const loggedOutLinks = document.querySelectorAll('.logged-out-link');

        function logout() {
            firebase.auth().signOut().catch(error => console.error('Error logging out:', error));
        }

        firebase.auth().onAuthStateChanged(user => {
            authButtonsDiv.innerHTML = '';
            if (user) {
                authButtonsDiv.innerHTML = `<a href="#" class="btn btn-logout" onclick="logout()">LOGOUT</a>`;
                loggedInLinks.forEach(link => link.style.display = 'inline-block');
                loggedOutLinks.forEach(link => link.style.display = 'none');
            } else {
                authButtonsDiv.innerHTML = `<a href="login.html" class="btn btn-login">LOGIN</a><a href="signup.html" class="btn btn-signup">SIGN UP</a>`;
                loggedInLinks.forEach(link => link.style.display = 'none');
                loggedOutLinks.forEach(link => link.style.display = 'inline-block');
            }
        });

        // --- UPDATED DROPDOWN & OVERLAY LOGIC ---
        document.addEventListener('DOMContentLoaded', () => {
            setHolidayGreeting();

            const dropdown = document.getElementById('more-dropdown');
            if (!dropdown) return;

            const dropdownContent = dropdown.querySelector('.dropdown-content');
            const overlay = document.getElementById('page-overlay');
            let hideTimeout;

            dropdown.addEventListener('mouseenter', () => {
                clearTimeout(hideTimeout);
                dropdownContent.classList.add('show');
                overlay.classList.add('show');
            });

            const hideMenu = () => {
                hideTimeout = setTimeout(() => {
                    dropdownContent.classList.remove('show');
                    overlay.classList.remove('show');
                }, 200);
            };

            dropdown.addEventListener('mouseleave', hideMenu);
            dropdownContent.addEventListener('mouseleave', hideMenu);

            dropdownContent.addEventListener('mouseenter', () => {
                clearTimeout(hideTimeout);
            });
        });
    </script>
</body>
</html>
